{"version":3,"sources":["../node_modules/echarts/lib/component/legend.js","../node_modules/echarts/lib/component/legend/LegendModel.js","../node_modules/echarts/lib/component/legend/legendAction.js","../node_modules/echarts/lib/component/legend/LegendView.js","../node_modules/echarts/lib/component/helper/listComponent.js","../node_modules/echarts/lib/component/legend/legendFilter.js","../node_modules/echarts/lib/chart/pie.js","../node_modules/echarts/lib/chart/pie/PieSeries.js","../node_modules/echarts/lib/chart/helper/createListSimply.js","../node_modules/echarts/lib/component/helper/selectableMixin.js","../node_modules/echarts/lib/chart/pie/PieView.js","../node_modules/echarts/lib/action/createDataSelectAction.js","../node_modules/echarts/lib/visual/dataColor.js","../node_modules/echarts/lib/chart/pie/pieLayout.js","../node_modules/echarts/lib/chart/pie/labelLayout.js","../node_modules/echarts/lib/processor/dataFilter.js"],"names":["echarts","legendFilter","Component","registerProcessor","registerSubTypeDefaulter","zrUtil","Model","isNameSpecified","LegendModel","extendComponentModel","type","dependencies","layoutMode","ignoreSize","init","option","parentModel","ecModel","this","mergeDefaultAndTheme","selected","mergeOption","superCall","optionUpdated","_updateData","legendData","_data","get","hasSelected","i","length","name","isSelected","select","potentialData","availableNames","eachRawSeries","seriesModel","isPotential","seriesName","push","legendDataProvider","data","names","mapArray","getName","isSeriesFiltered","concat","_availableNames","rawData","map","dataItem","getData","each","unSelect","toggleSelected","hasOwnProperty","indexOf","defaultOption","zlevel","z","show","orient","left","top","align","backgroundColor","borderColor","borderRadius","borderWidth","padding","itemGap","itemWidth","itemHeight","inactiveColor","textStyle","color","selectedMode","tooltip","_default","module","exports","legendSelectActionHandler","methodName","payload","selectedMap","isToggleSelect","eachComponent","legendModel","model","isItemSelected","registerAction","curry","__DEV__","createSymbol","graphic","makeBackground","layoutUtil","Group","extendComponentView","newlineDisabled","group","add","_contentGroup","_backgroundEl","_isFirstRender","getContentGroup","render","api","isFirstRender","resetInner","itemAlign","renderInner","positionInfo","getBoxLayoutParams","viewportSize","width","getWidth","height","getHeight","maxSize","getLayoutRect","mainRect","layoutInner","layoutRect","defaults","attr","x","y","removeAll","remove","contentGroup","legendDrawnMap","createHashMap","selectMode","excludeSeriesId","id","itemModel","dataIndex","getSeriesByName","getVisual","getDataParams","legendSymbolType","symbolType","_createItem","on","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","set","idx","indexOfName","getItemVisual","newline","symbolKeepAspect","itemGroup","textStyleModel","getModel","itemIcon","tooltipModel","legendGlobalTooltipModel","size","textX","textAlign","formatter","content","replace","Text","style","setTextStyle","text","textFill","getTextColor","textVerticalAlign","hitRect","Rect","shape","getBoundingRect","invisible","extend","formatterParams","componentType","legendIndex","componentIndex","$vars","eachChild","child","silent","setHoverStyle","__legendDataIndex","box","contentRect","dispatchAction","dataName","el","getZr","storage","getDisplayList","useHoverLayer","_layout","layoutBox","positionElement","formatUtil","layout","componentModel","boxLayoutParams","rect","normalizeCssArray","getItemStyle","fill","r","z2","legendModels","findComponents","mainType","filterSeries","series","createDataSelectAction","dataColor","pieLayout","dataFilter","event","method","registerVisual","registerLayout","createListSimply","modelUtil","getPercentWithPrecision","dataSelectableMixin","retrieveRawAttr","PieSeries","extendSeriesModel","superApply","arguments","getRawData","updateSelectedMap","_createSelectableList","_defaultLabelLine","newOption","getInitialData","valueDim","mapDimension","targetList","len","count","value","params","valueList","percent","hostModel","defaultEmphasis","labelLineNormalOpt","labelLine","labelLineEmphasisOpt","emphasis","label","legendHoverLink","hoverAnimation","center","radius","clockwise","startAngle","minAngle","minShowLabelAngle","selectedOffset","hoverOffset","avoidLabelOverlap","percentPrecision","stillShowZeroSum","rotate","position","length2","smooth","lineStyle","itemStyle","animationType","animationEasing","mixin","createDimensions","List","_util","isArray","opt","nameList","coordDimensions","source","getSource","dimensionsInfo","list","initData","_targetList","slice","_selectTargetMap","reduce","targetMap","target","ChartView","updateDataSelected","uid","hasAnimation","from","seriesId","toggleItemSelected","getItemGraphicEl","getItemLayout","midAngle","endAngle","offset","Math","cos","sin","animate","when","start","PiePiece","call","sector","Sector","polyline","Polyline","updateData","piePieceProto","prototype","firstCreate","childAt","labelText","getItemModel","sectorShape","setShape","getShallow","r0","initProps","updateProps","visualColor","useStyle","lineJoin","hoverStyle","cursorStyle","_updateLabel","highDownOnUpdate","isAnimationEnabled","fromState","toState","ignore","hoverIgnore","stopAnimation","animateTo","normalIgnore","labelLayout","isNaN","points","linePoints","rotation","origin","labelModel","labelHoverModel","labelLineModel","labelLineHoverModel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","autoColor","useInsideStyle","inside","verticalAlign","opacity","setStyle","stroke","getLineStyle","inherits","sectorGroup","_sectorGroup","oldData","onSectorClick","diff","piePiece","setItemGraphicEl","update","newIdx","oldIdx","off","execute","s","max","removeClipPath","bind","setClipPath","_createClipPath","cx","cy","dispose","cb","clipPath","PI","containPoint","point","itemLayout","dx","dy","sqrt","seriesType","actionInfos","actionInfo","subType","query","getTargetSeries","paletteScope","seiresModelMap","eachSeriesByType","__paletteScope","reset","dataAll","idxMap","rawIdx","getRawIndex","filteredIdx","singleDataColor","setItemVisual","getColorFromPalette","_number","parsePercent","linearMap","PI2","RADIAN","min","validDataCount","sum","getSum","unitRadian","roseType","extent","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","angle","setItemLayout","NaN","textContain","adjustSingleSide","viewWidth","viewHeight","shiftDown","end","delta","j","shiftUp","changeX","isDownList","lastDeltaX","Number","MAX_VALUE","l","deltaY","abs","len2","deltaX","sort","a","b","lastY","upList","downList","isPositionCenter","labelLayoutList","hasLabelRotate","minShowLabelRadian","labelPosition","labelLineLen","labelLineLen2","textY","isLabelInside","x1","y1","x2","y2","x3","labelRotate","font","getFont","getFormattedLabel","textRect","leftList","rightList","dist","avoidOverlap","filterSelf"],"mappings":"6GAkBA,IAAIA,EAAU,EAAQ,KAEtB,EAAQ,KAER,EAAQ,KAER,EAAQ,KAER,IAAIC,EAAe,EAAQ,KAEvBC,EAAY,EAAQ,KAuBxBF,EAAQG,kBAAkBF,GAC1BC,EAAUE,yBAAyB,UAAU,WAE3C,MAAO,Y,oBCpCT,IAAIJ,EAAU,EAAQ,KAElBK,EAAS,EAAQ,KAEjBC,EAAQ,EAAQ,KAIhBC,EAFS,EAAQ,KAEQA,gBAoBzBC,EAAcR,EAAQS,qBAAqB,CAC7CC,KAAM,eACNC,aAAc,CAAC,UACfC,WAAY,CACVF,KAAM,MAQNG,YAAY,GAEdC,KAAM,SAAcC,EAAQC,EAAaC,GACvCC,KAAKC,qBAAqBJ,EAAQE,GAClCF,EAAOK,SAAWL,EAAOK,UAAY,IAEvCC,YAAa,SAAqBN,GAChCP,EAAYc,UAAUJ,KAAM,cAAeH,IAE7CQ,cAAe,WACbL,KAAKM,YAAYN,KAAKD,SAEtB,IAAIQ,EAAaP,KAAKQ,MAEtB,GAAID,EAAW,IAAmC,WAA7BP,KAAKS,IAAI,gBAA8B,CAG1D,IAFA,IAAIC,GAAc,EAETC,EAAI,EAAGA,EAAIJ,EAAWK,OAAQD,IAAK,CAC1C,IAAIE,EAAON,EAAWI,GAAGF,IAAI,QAE7B,GAAIT,KAAKc,WAAWD,GAAO,CAEzBb,KAAKe,OAAOF,GACZH,GAAc,EACd,QAKHA,GAAeV,KAAKe,OAAOR,EAAW,GAAGE,IAAI,WAGlDH,YAAa,SAAqBP,GAChC,IAAIiB,EAAgB,GAChBC,EAAiB,GACrBlB,EAAQmB,eAAc,SAAUC,GAC9B,IAEIC,EAFAC,EAAaF,EAAYN,KAI7B,GAHAI,EAAeK,KAAKD,GAGhBF,EAAYI,mBAAoB,CAClC,IAAIC,EAAOL,EAAYI,qBACnBE,EAAQD,EAAKE,SAASF,EAAKG,SAE1B5B,EAAQ6B,iBAAiBT,KAC5BF,EAAiBA,EAAeY,OAAOJ,IAGrCA,EAAMb,OACRI,EAAgBA,EAAca,OAAOJ,GAErCL,GAAc,OAGhBA,GAAc,EAGZA,GAAe/B,EAAgB8B,IACjCH,EAAcM,KAAKH,EAAYN,SAQnCb,KAAK8B,gBAAkBb,EAGvB,IAAIc,EAAU/B,KAAKS,IAAI,SAAWO,EAC9BT,EAAapB,EAAO6C,IAAID,GAAS,SAAUE,GAQ7C,MANwB,kBAAbA,GAA6C,kBAAbA,IACzCA,EAAW,CACTpB,KAAMoB,IAIH,IAAI7C,EAAM6C,EAAUjC,KAAMA,KAAKD,WACrCC,MAMHA,KAAKQ,MAAQD,GAMf2B,QAAS,WACP,OAAOlC,KAAKQ,OAMdO,OAAQ,SAAgBF,GACtB,IAAIX,EAAWF,KAAKH,OAAOK,SAG3B,GAAqB,WAFFF,KAAKS,IAAI,gBAEG,CAC7B,IAAIe,EAAOxB,KAAKQ,MAChBrB,EAAOgD,KAAKX,GAAM,SAAUS,GAC1B/B,EAAS+B,EAASxB,IAAI,UAAW,KAIrCP,EAASW,IAAQ,GAMnBuB,SAAU,SAAkBvB,GACO,WAA7Bb,KAAKS,IAAI,kBACXT,KAAKH,OAAOK,SAASW,IAAQ,IAOjCwB,eAAgB,SAAwBxB,GACtC,IAAIX,EAAWF,KAAKH,OAAOK,SAEtBA,EAASoC,eAAezB,KAC3BX,EAASW,IAAQ,GAGnBb,KAAKE,EAASW,GAAQ,WAAa,UAAUA,IAM/CC,WAAY,SAAoBD,GAC9B,IAAIX,EAAWF,KAAKH,OAAOK,SAC3B,QAASA,EAASoC,eAAezB,KAAUX,EAASW,KAAU1B,EAAOoD,QAAQvC,KAAK8B,gBAAiBjB,IAAS,GAE9G2B,cAAe,CAEbC,OAAQ,EAERC,EAAG,EACHC,MAAM,EAGNC,OAAQ,aACRC,KAAM,SAENC,IAAK,EAKLC,MAAO,OACPC,gBAAiB,gBAEjBC,YAAa,OACbC,aAAc,EAEdC,YAAa,EAGbC,QAAS,EAGTC,QAAS,GAETC,UAAW,GAEXC,WAAY,GAEZC,cAAe,OACfC,UAAW,CAETC,MAAO,QAITC,cAAc,EAMdC,QAAS,CACPjB,MAAM,MAIRkB,EAAWvE,EACfwE,EAAOC,QAAUF,G,oBC1OjB,IAAI/E,EAAU,EAAQ,KAElBK,EAAS,EAAQ,KAqBrB,SAAS6E,EAA0BC,EAAYC,EAASnE,GACtD,IAEIe,EAFAqD,EAAc,GACdC,EAAgC,mBAAfH,EAkCrB,OA/BAlE,EAAQsE,cAAc,UAAU,SAAUC,GACpCF,GAAgC,MAAdtD,EAKpBwD,EAAYxD,EAAa,SAAW,YAAYoD,EAAQrD,OAExDyD,EAAYL,GAAYC,EAAQrD,MAChCC,EAAawD,EAAYxD,WAAWoD,EAAQrD,OAG9C,IAAIN,EAAa+D,EAAYpC,UAC7B/C,EAAOgD,KAAK5B,GAAY,SAAUgE,GAChC,IAAI1D,EAAO0D,EAAM9D,IAAI,QAErB,GAAa,OAATI,GAA0B,KAATA,EAArB,CAIA,IAAI2D,EAAiBF,EAAYxD,WAAWD,GAExCsD,EAAY7B,eAAezB,GAE7BsD,EAAYtD,GAAQsD,EAAYtD,IAAS2D,EAEzCL,EAAYtD,GAAQ2D,SAKnB,CACL3D,KAAMqD,EAAQrD,KACdX,SAAUiE,GAYdrF,EAAQ2F,eAAe,qBAAsB,sBAAuBtF,EAAOuF,MAAMV,EAA2B,mBAQ5GlF,EAAQ2F,eAAe,eAAgB,iBAAkBtF,EAAOuF,MAAMV,EAA2B,WAQjGlF,EAAQ2F,eAAe,iBAAkB,mBAAoBtF,EAAOuF,MAAMV,EAA2B,c,oBCzFvF,EAAQ,KAEAW,QAFtB,IAII7F,EAAU,EAAQ,KAElBK,EAAS,EAAQ,KAIjByF,EAFU,EAAQ,KAEKA,aAEvBC,EAAU,EAAQ,KAIlBC,EAFiB,EAAQ,KAEOA,eAEhCC,EAAa,EAAQ,KAqBrBL,EAAQvF,EAAOuF,MACfvC,EAAOhD,EAAOgD,KACd6C,EAAQH,EAAQG,MAEhBnB,EAAW/E,EAAQmG,oBAAoB,CACzCzF,KAAM,eACN0F,iBAAiB,EAKjBtF,KAAM,WAKJI,KAAKmF,MAAMC,IAAIpF,KAAKqF,cAAgB,IAAIL,GAMxChF,KAAKsF,cAQLtF,KAAKuF,gBAAiB,GAMxBC,gBAAiB,WACf,OAAOxF,KAAKqF,eAMdI,OAAQ,SAAgBnB,EAAavE,EAAS2F,GAC5C,IAAIC,EAAgB3F,KAAKuF,eAIzB,GAHAvF,KAAKuF,gBAAiB,EACtBvF,KAAK4F,aAEAtB,EAAY7D,IAAI,QAAQ,GAA7B,CAIA,IAAIoF,EAAYvB,EAAY7D,IAAI,SAE3BoF,GAA2B,SAAdA,IAChBA,EAAwC,UAA5BvB,EAAY7D,IAAI,SAAqD,aAA9B6D,EAAY7D,IAAI,UAA2B,QAAU,QAG1GT,KAAK8F,YAAYD,EAAWvB,EAAavE,EAAS2F,GAElD,IAAIK,EAAezB,EAAY0B,qBAC3BC,EAAe,CACjBC,MAAOR,EAAIS,WACXC,OAAQV,EAAIW,aAEVjD,EAAUkB,EAAY7D,IAAI,WAC1B6F,EAAUvB,EAAWwB,cAAcR,EAAcE,EAAc7C,GAC/DoD,EAAWxG,KAAKyG,YAAYnC,EAAauB,EAAWS,EAASX,GAE7De,EAAa3B,EAAWwB,cAAcpH,EAAOwH,SAAS,CACxDT,MAAOM,EAASN,MAChBE,OAAQI,EAASJ,QAChBL,GAAeE,EAAc7C,GAChCpD,KAAKmF,MAAMyB,KAAK,WAAY,CAACF,EAAWG,EAAIL,EAASK,EAAGH,EAAWI,EAAIN,EAASM,IAEhF9G,KAAKmF,MAAMC,IAAIpF,KAAKsF,cAAgBR,EAAe0B,EAAUlC,MAM/DsB,WAAY,WACV5F,KAAKwF,kBAAkBuB,YACvB/G,KAAKsF,eAAiBtF,KAAKmF,MAAM6B,OAAOhH,KAAKsF,gBAM/CQ,YAAa,SAAqBD,EAAWvB,EAAavE,EAAS2F,GACjE,IAAIuB,EAAejH,KAAKwF,kBACpB0B,EAAiB/H,EAAOgI,gBACxBC,EAAa9C,EAAY7D,IAAI,gBAC7B4G,EAAkB,GACtBtH,EAAQmB,eAAc,SAAUC,IAC7BA,EAAYV,IAAI,oBAAsB4G,EAAgB/F,KAAKH,EAAYmG,OAE1EnF,EAAKmC,EAAYpC,WAAW,SAAUqF,EAAWC,GAC/C,IAAI3G,EAAO0G,EAAU9G,IAAI,QAEzB,GAAKT,KAAKkF,iBAA6B,KAATrE,GAAwB,OAATA,EAA7C,CAQA,IAAIM,EAAcpB,EAAQ0H,gBAAgB5G,GAAM,GAEhD,IAAIqG,EAAezG,IAAII,GAMvB,GAAIM,EAAa,CACf,IAAIK,EAAOL,EAAYe,UACnBwB,EAAQlC,EAAKkG,UAAU,SAEN,oBAAVhE,IAETA,EAAQA,EAAMvC,EAAYwG,cAAc,KAI1C,IAAIC,EAAmBpG,EAAKkG,UAAU,iBAAmB,YACrDG,EAAarG,EAAKkG,UAAU,UAEhB1H,KAAK8H,YAAYjH,EAAM2G,EAAWD,EAAWjD,EAAasD,EAAkBC,EAAYhC,EAAWnC,EAAO0D,GAEhHW,GAAG,QAASrD,EAAMsD,EAAsBnH,EAAM6E,IAAMqC,GAAG,YAAarD,EAAMuD,EAAyB9G,EAAYN,KAAM,KAAM6E,EAAK2B,IAAkBU,GAAG,WAAYrD,EAAMwD,EAAwB/G,EAAYN,KAAM,KAAM6E,EAAK2B,IACtOH,EAAeiB,IAAItH,GAAM,QAGzBd,EAAQmB,eAAc,SAAUC,GAE9B,IAAI+F,EAAezG,IAAII,IAInBM,EAAYI,mBAAoB,CAClC,IAAIC,EAAOL,EAAYI,qBACnB6G,EAAM5G,EAAK6G,YAAYxH,GAE3B,GAAIuH,EAAM,EACR,OAGF,IAAI1E,EAAQlC,EAAK8G,cAAcF,EAAK,SAGpBpI,KAAK8H,YAAYjH,EAAM2G,EAAWD,EAAWjD,EAFtC,YAEqE,KAAMuB,EAAWnC,EAAO0D,GAG1GW,GAAG,QAASrD,EAAMsD,EAAsBnH,EAAM6E,IAEvDqC,GAAG,YAAarD,EAAMuD,EAAyB,KAAMpH,EAAM6E,EAAK2B,IAAkBU,GAAG,WAAYrD,EAAMwD,EAAwB,KAAMrH,EAAM6E,EAAK2B,IACjJH,EAAeiB,IAAItH,GAAM,MAE1Bb,WA3DHiH,EAAa7B,IAAI,IAAIJ,EAAM,CACzBuD,SAAS,OA4DZvI,OAEL8H,YAAa,SAAqBjH,EAAM2G,EAAWD,EAAWjD,EAAasD,EAAkBC,EAAYhC,EAAWnC,EAAO0D,GACzH,IAAI9D,EAAYgB,EAAY7D,IAAI,aAC5B8C,EAAae,EAAY7D,IAAI,cAC7B+C,EAAgBc,EAAY7D,IAAI,iBAChC+H,EAAmBlE,EAAY7D,IAAI,oBACnCK,EAAawD,EAAYxD,WAAWD,GACpC4H,EAAY,IAAIzD,EAChB0D,EAAiBnB,EAAUoB,SAAS,aACpCC,EAAWrB,EAAU9G,IAAI,QACzBoI,EAAetB,EAAUoB,SAAS,WAClCG,EAA2BD,EAAa/I,YAO5C,GALA8H,EAAmBgB,GAAYhB,EAC/Ba,EAAUrD,IAAIR,EAAagD,EAAkB,EAAG,EAAGtE,EAAWC,EAAYzC,EAAa4C,EAAQF,EAC3E,MAApBgF,GAAkCA,KAG7BI,GAAYf,IACbA,IAAeD,GAAmC,SAAfC,GAAwB,CAC7D,IAAIkB,EAAoB,GAAbxF,EAEQ,SAAfsE,IACFA,EAAa,UAIfY,EAAUrD,IAAIR,EAAaiD,GAAavE,EAAYyF,GAAQ,GAAIxF,EAAawF,GAAQ,EAAGA,EAAMA,EAAMjI,EAAa4C,EAAQF,EACrG,MAApBgF,GAAkCA,IAGpC,IAAIQ,EAAsB,SAAdnD,EAAuBvC,EAAY,GAAK,EAChD2F,EAAYpD,EACZqD,EAAY5E,EAAY7D,IAAI,aAC5B0I,EAAUtI,EAEW,kBAAdqI,GAA0BA,EACnCC,EAAUD,EAAUE,QAAQ,SAAkB,MAARvI,EAAeA,EAAO,IAC9B,oBAAdqI,IAChBC,EAAUD,EAAUrI,IAGtB4H,EAAUrD,IAAI,IAAIP,EAAQwE,KAAK,CAC7BC,MAAOzE,EAAQ0E,aAAa,GAAIb,EAAgB,CAC9Cc,KAAML,EACNtC,EAAGmC,EACHlC,EAAGvD,EAAa,EAChBkG,SAAU3I,EAAa4H,EAAegB,eAAiBlG,EACvDyF,UAAWA,EACXU,kBAAmB,cAIvB,IAAIC,EAAU,IAAI/E,EAAQgF,KAAK,CAC7BC,MAAOrB,EAAUsB,kBACjBC,WAAW,EACXpG,QAASiF,EAAapI,IAAI,QAAUtB,EAAO8K,OAAO,CAChDd,QAAStI,EAETqI,UAAWJ,EAAyBrI,IAAI,aAAa,IAAS,WAC5D,OAAOI,GAETqJ,gBAAiB,CACfC,cAAe,SACfC,YAAa9F,EAAY+F,eACzBxJ,KAAMA,EACNyJ,MAAO,CAAC,UAETzB,EAAahJ,QAAU,OAU5B,OARA4I,EAAUrD,IAAIwE,GACdnB,EAAU8B,WAAU,SAAUC,GAC5BA,EAAMC,QAAS,KAEjBb,EAAQa,QAAUrD,EAClBpH,KAAKwF,kBAAkBJ,IAAIqD,GAC3B5D,EAAQ6F,cAAcjC,GACtBA,EAAUkC,kBAAoBnD,EACvBiB,GAMThC,YAAa,SAAqBnC,EAAauB,EAAWS,GACxD,IAAIW,EAAejH,KAAKwF,kBAExBT,EAAW6F,IAAItG,EAAY7D,IAAI,UAAWwG,EAAc3C,EAAY7D,IAAI,WAAY6F,EAAQJ,MAAOI,EAAQF,QAC3G,IAAIyE,EAAc5D,EAAa8C,kBAE/B,OADA9C,EAAaL,KAAK,WAAY,EAAEiE,EAAYhE,GAAIgE,EAAY/D,IACrD9G,KAAKmF,MAAM4E,mBAMpB/C,OAAQ,WACNhH,KAAKwF,kBAAkBuB,YACvB/G,KAAKuF,gBAAiB,KAI1B,SAASyC,EAAqBnH,EAAM6E,GAClCA,EAAIoF,eAAe,CACjBtL,KAAM,qBACNqB,KAAMA,IAIV,SAASoH,EAAwB5G,EAAY0J,EAAUrF,EAAK2B,GAE1D,IAAI2D,EAAKtF,EAAIuF,QAAQC,QAAQC,iBAAiB,GAExCH,GAAMA,EAAGI,eACb1F,EAAIoF,eAAe,CACjBtL,KAAM,YACN6B,WAAYA,EACZR,KAAMkK,EACN1D,gBAAiBA,IAKvB,SAASa,EAAuB7G,EAAY0J,EAAUrF,EAAK2B,GAEzD,IAAI2D,EAAKtF,EAAIuF,QAAQC,QAAQC,iBAAiB,GAExCH,GAAMA,EAAGI,eACb1F,EAAIoF,eAAe,CACjBtL,KAAM,WACN6B,WAAYA,EACZR,KAAMkK,EACN1D,gBAAiBA,IAKvBvD,EAAOC,QAAUF,G,oBCnVjB,IAAIwH,EAAU,EAAQ,KAElB9E,EAAgB8E,EAAQ9E,cACxB+E,EAAYD,EAAQT,IACpBW,EAAkBF,EAAQE,gBAE1BC,EAAa,EAAQ,KAErB3G,EAAU,EAAQ,KAgEtBd,EAAQ0H,OAnCR,SAAgBtG,EAAOuG,EAAgBhG,GACrC,IAAIiG,EAAkBD,EAAe1F,qBACjC5C,EAAUsI,EAAejL,IAAI,WAC7BwF,EAAe,CACjBC,MAAOR,EAAIS,WACXC,OAAQV,EAAIW,aAEVuF,EAAOrF,EAAcoF,EAAiB1F,EAAc7C,GACxDkI,EAAUI,EAAejL,IAAI,UAAW0E,EAAOuG,EAAejL,IAAI,WAAYmL,EAAK1F,MAAO0F,EAAKxF,QAC/FmF,EAAgBpG,EAAOwG,EAAiB1F,EAAc7C,IA2BxDW,EAAQe,eAxBR,SAAwB8G,EAAMF,GAC5B,IAAItI,EAAUoI,EAAWK,kBAAkBH,EAAejL,IAAI,YAC1D6I,EAAQoC,EAAeI,aAAa,CAAC,QAAS,YAkBlD,OAjBAxC,EAAMyC,KAAOL,EAAejL,IAAI,mBAC5BmL,EAAO,IAAI/G,EAAQgF,KAAK,CAC1BC,MAAO,CACLjD,EAAG+E,EAAK/E,EAAIzD,EAAQ,GACpB0D,EAAG8E,EAAK9E,EAAI1D,EAAQ,GACpB8C,MAAO0F,EAAK1F,MAAQ9C,EAAQ,GAAKA,EAAQ,GACzCgD,OAAQwF,EAAKxF,OAAShD,EAAQ,GAAKA,EAAQ,GAC3C4I,EAAGN,EAAejL,IAAI,iBAExB6I,MAAOA,EACPmB,QAAQ,EACRwB,IAAK,M,kBCxBTnI,EAAOC,QApBP,SAAkBhE,GAChB,IAAImM,EAAenM,EAAQoM,eAAe,CACxCC,SAAU,WAGRF,GAAgBA,EAAatL,QAC/Bb,EAAQsM,cAAa,SAAUC,GAG7B,IAAK,IAAI3L,EAAI,EAAGA,EAAIuL,EAAatL,OAAQD,IACvC,IAAKuL,EAAavL,GAAGG,WAAWwL,EAAOzL,MACrC,OAAO,EAIX,OAAO,O,oBClCb,IAAI/B,EAAU,EAAQ,KAElBK,EAAS,EAAQ,KAErB,EAAQ,KAER,EAAQ,KAER,IAAIoN,EAAyB,EAAQ,KAEjCC,EAAY,EAAQ,KAEpBC,EAAY,EAAQ,KAEpBC,EAAa,EAAQ,KAqBzBH,EAAuB,MAAO,CAAC,CAC7B/M,KAAM,kBACNmN,MAAO,mBACPC,OAAQ,kBACP,CACDpN,KAAM,YACNmN,MAAO,cACPC,OAAQ,UACP,CACDpN,KAAM,cACNmN,MAAO,gBACPC,OAAQ,cAEV9N,EAAQ+N,eAAeL,EAAU,QACjC1N,EAAQgO,eAAe3N,EAAOuF,MAAM+H,EAAW,QAC/C3N,EAAQG,kBAAkByN,EAAW,S,oBClDrC,IAAI5N,EAAU,EAAQ,KAElBiO,EAAmB,EAAQ,KAE3B5N,EAAS,EAAQ,KAEjB6N,EAAY,EAAQ,KAIpBC,EAFU,EAAQ,KAEgBA,wBAElCC,EAAsB,EAAQ,KAI9BC,EAFgB,EAAQ,KAEQA,gBAoBhCC,EAAYtO,EAAQuO,kBAAkB,CACxC7N,KAAM,aAENI,KAAM,SAAcC,GAClBuN,EAAUE,WAAWtN,KAAM,OAAQuN,WAGnCvN,KAAKuB,mBAAqB,WACxB,OAAOvB,KAAKwN,cAGdxN,KAAKyN,kBAAkBzN,KAAK0N,yBAE5B1N,KAAK2N,kBAAkB9N,IAGzBM,YAAa,SAAqByN,GAChCR,EAAUhN,UAAUJ,KAAM,cAAe4N,GACzC5N,KAAKyN,kBAAkBzN,KAAK0N,0BAE9BG,eAAgB,SAAwBhO,EAAQE,GAC9C,OAAOgN,EAAiB/M,KAAM,CAAC,WAEjC0N,sBAAuB,WAKrB,IAJA,IAAIlM,EAAOxB,KAAKwN,aACZM,EAAWtM,EAAKuM,aAAa,SAC7BC,EAAa,GAERrN,EAAI,EAAGsN,EAAMzM,EAAK0M,QAASvN,EAAIsN,EAAKtN,IAC3CqN,EAAW1M,KAAK,CACdT,KAAMW,EAAKG,QAAQhB,GACnBwN,MAAO3M,EAAKf,IAAIqN,EAAUnN,GAC1BT,SAAUiN,EAAgB3L,EAAMb,EAAG,cAIvC,OAAOqN,GAGTrG,cAAe,SAAuBH,GACpC,IAAIhG,EAAOxB,KAAKkC,UACZkM,EAAShB,EAAUhN,UAAUJ,KAAM,gBAAiBwH,GAEpD6G,EAAY,GAMhB,OALA7M,EAAKW,KAAKX,EAAKuM,aAAa,UAAU,SAAUI,GAC9CE,EAAU/M,KAAK6M,MAEjBC,EAAOE,QAAUrB,EAAwBoB,EAAW7G,EAAWhG,EAAK+M,UAAU9N,IAAI,qBAClF2N,EAAO9D,MAAMhJ,KAAK,WACX8M,GAETT,kBAAmB,SAA2B9N,GAE5CmN,EAAUwB,gBAAgB3O,EAAQ,YAAa,CAAC,SAChD,IAAI4O,EAAqB5O,EAAO6O,UAC5BC,EAAuB9O,EAAO+O,SAASF,UAE3CD,EAAmB9L,KAAO8L,EAAmB9L,MAAQ9C,EAAOgP,MAAMlM,KAClEgM,EAAqBhM,KAAOgM,EAAqBhM,MAAQ9C,EAAO+O,SAASC,MAAMlM,MAEjFH,cAAe,CACbC,OAAQ,EACRC,EAAG,EACHoM,iBAAiB,EACjBC,gBAAgB,EAEhBC,OAAQ,CAAC,MAAO,OAChBC,OAAQ,CAAC,EAAG,OAEZC,WAAW,EACXC,WAAY,GAEZC,SAAU,EAGVC,kBAAmB,EAEnBC,eAAgB,GAEhBC,YAAa,GAEbC,mBAAmB,EAKnBC,iBAAkB,EAElBC,kBAAkB,EAElBb,MAAO,CAELc,QAAQ,EACRhN,MAAM,EAENiN,SAAU,SAMZlB,UAAW,CACT/L,MAAM,EAEN/B,OAAQ,GAERiP,QAAS,GACTC,QAAQ,EACRC,UAAW,CAET7J,MAAO,EACP1G,KAAM,UAGVwQ,UAAW,CACT7M,YAAa,GAGf8M,cAAe,YACfC,gBAAiB,cAGrB/Q,EAAOgR,MAAM/C,EAAWF,GACxB,IAAIrJ,EAAWuJ,EACftJ,EAAOC,QAAUF,G,oBChKjB,IAAIuM,EAAmB,EAAQ,KAE3BC,EAAO,EAAQ,KAEfC,EAAQ,EAAQ,KAEhBrG,EAASqG,EAAMrG,OACfsG,EAAUD,EAAMC,QAgDpBzM,EAAOC,QAXP,SAAkB5C,EAAaqP,EAAKC,GAClCD,EAAMD,EAAQC,IAAQ,CACpBE,gBAAiBF,IACdvG,EAAO,GAAIuG,GAChB,IAAIG,EAASxP,EAAYyP,YACrBC,EAAiBT,EAAiBO,EAAQH,GAC1CM,EAAO,IAAIT,EAAKQ,EAAgB1P,GAEpC,OADA2P,EAAKC,SAASJ,EAAQF,GACfK,I,oBCpDT,IAAI3R,EAAS,EAAQ,KA2BjB0E,EAAW,CAMb4J,kBAAmB,SAA2BO,GAC5ChO,KAAKgR,YAAc7R,EAAOoR,QAAQvC,GAAcA,EAAWiD,QAAU,GACrEjR,KAAKkR,iBAAmB/R,EAAOgS,OAAOnD,GAAc,IAAI,SAAUoD,EAAWC,GAE3E,OADAD,EAAUjJ,IAAIkJ,EAAOxQ,KAAMwQ,GACpBD,IACNjS,EAAOgI,kBAWZpG,OAAQ,SAAgBF,EAAMyG,GAC5B,IAAI+J,EAAe,MAAN/J,EAAatH,KAAKgR,YAAY1J,GAAMtH,KAAKkR,iBAAiBzQ,IAAII,GAGtD,WAFFb,KAAKS,IAAI,iBAG1BT,KAAKkR,iBAAiB/O,MAAK,SAAUkP,GACnCA,EAAOnR,UAAW,KAItBmR,IAAWA,EAAOnR,UAAW,IAU/BkC,SAAU,SAAkBvB,EAAMyG,GAChC,IAAI+J,EAAe,MAAN/J,EAAatH,KAAKgR,YAAY1J,GAAMtH,KAAKkR,iBAAiBzQ,IAAII,GAG3EwQ,IAAWA,EAAOnR,UAAW,IAU/BmC,eAAgB,SAAwBxB,EAAMyG,GAC5C,IAAI+J,EAAe,MAAN/J,EAAatH,KAAKgR,YAAY1J,GAAMtH,KAAKkR,iBAAiBzQ,IAAII,GAE3E,GAAc,MAAVwQ,EAEF,OADArR,KAAKqR,EAAOnR,SAAW,WAAa,UAAUW,EAAMyG,GAC7C+J,EAAOnR,UAWlBY,WAAY,SAAoBD,EAAMyG,GACpC,IAAI+J,EAAe,MAAN/J,EAAatH,KAAKgR,YAAY1J,GAAMtH,KAAKkR,iBAAiBzQ,IAAII,GAC3E,OAAOwQ,GAAUA,EAAOnR,WAG5B4D,EAAOC,QAAUF,G,oBCxGjB,IAAI1E,EAAS,EAAQ,KAEjB0F,EAAU,EAAQ,KAElByM,EAAY,EAAQ,KA2BxB,SAASC,EAAmBC,EAAKrQ,EAAasQ,EAAc/L,GAC1D,IAAIlE,EAAOL,EAAYe,UACnBsF,EAAYxH,KAAKwH,UACjB3G,EAAOW,EAAKG,QAAQ6F,GACpB8H,EAAiBnO,EAAYV,IAAI,kBACrCiF,EAAIoF,eAAe,CACjBtL,KAAM,kBACNkS,KAAMF,EACN3Q,KAAMA,EACN8Q,SAAUxQ,EAAYmG,KAExB9F,EAAKW,MAAK,SAAUiG,GAClBwJ,EAAmBpQ,EAAKqQ,iBAAiBzJ,GAAM5G,EAAKsQ,cAAc1J,GAAMjH,EAAYL,WAAWU,EAAKG,QAAQyG,IAAOkH,EAAgBmC,MAavI,SAASG,EAAmB5G,EAAIS,EAAQ3K,EAAYwO,EAAgBmC,GAClE,IAAIM,GAAYtG,EAAO0D,WAAa1D,EAAOuG,UAAY,EAGnDC,EAASnR,EAAawO,EAAiB,EACvCM,EAAW,CAHNsC,KAAKC,IAAIJ,GAGGE,EAFZC,KAAKE,IAAIL,GAEgBE,GAClCR,EACEzG,EAAGqH,UAAUC,KAAK,IAAK,CACvB1C,SAAUA,IACT2C,MAAM,aAAevH,EAAGpE,KAAK,WAAYgJ,GAS9C,SAAS4C,EAAShR,EAAM4G,GACtBvD,EAAQG,MAAMyN,KAAKzS,MACnB,IAAI0S,EAAS,IAAI7N,EAAQ8N,OAAO,CAC9B1G,GAAI,IAEF2G,EAAW,IAAI/N,EAAQgO,SACvBrJ,EAAO,IAAI3E,EAAQwE,KACvBrJ,KAAKoF,IAAIsN,GACT1S,KAAKoF,IAAIwN,GACT5S,KAAKoF,IAAIoE,GACTxJ,KAAK8S,WAAWtR,EAAM4G,GAAK,GAG7B,IAAI2K,EAAgBP,EAASQ,UAE7BD,EAAcD,WAAa,SAAUtR,EAAM4G,EAAK6K,GAC9C,IAAIP,EAAS1S,KAAKkT,QAAQ,GACtBxE,EAAY1O,KAAKkT,QAAQ,GACzBC,EAAYnT,KAAKkT,QAAQ,GACzB/R,EAAcK,EAAK+M,UACnBhH,EAAY/F,EAAK4R,aAAahL,GAC9BqD,EAASjK,EAAKsQ,cAAc1J,GAC5BiL,EAAclU,EAAO8K,OAAO,GAAIwB,IACpC4H,EAAYxE,MAAQ,KAEhBoE,IACFP,EAAOY,SAASD,GAGM,UAFFlS,EAAYoS,WAAW,kBAGzCb,EAAO5I,MAAMkC,EAAIP,EAAO+H,GACxB3O,EAAQ4O,UAAUf,EAAQ,CACxB5I,MAAO,CACLkC,EAAGP,EAAOO,IAEX7K,EAAaiH,KAGdsK,EAAO5I,MAAMkI,SAAWvG,EAAO0D,WAC/BtK,EAAQ6O,YAAYhB,EAAQ,CAC1B5I,MAAO,CACLkI,SAAUvG,EAAOuG,WAElB7Q,EAAaiH,KAGpBvD,EAAQ6O,YAAYhB,EAAQ,CAC1B5I,MAAOuJ,GACNlS,EAAaiH,GAIlB,IAAIuL,EAAcnS,EAAK8G,cAAcF,EAAK,SAC1CsK,EAAOkB,SAASzU,EAAOwH,SAAS,CAC9BkN,SAAU,QACV9H,KAAM4H,GACLpM,EAAUoB,SAAS,aAAamD,iBACnC4G,EAAOoB,WAAavM,EAAUoB,SAAS,sBAAsBmD,eAC7D,IAAIiI,EAAcxM,EAAUgM,WAAW,UACvCQ,GAAerB,EAAO9L,KAAK,SAAUmN,GAErCnC,EAAmB5R,KAAMwB,EAAKsQ,cAAc1J,GAAMjH,EAAYL,WAAW,KAAMsH,GAAMjH,EAAYV,IAAI,kBAAmBU,EAAYV,IAAI,cAExIT,KAAKgU,aAAaxS,EAAM4G,GAExBpI,KAAKiU,iBAAmB1M,EAAU9G,IAAI,mBAAqBU,EAAY+S,qBAAuB,SAAUC,EAAWC,GACjG,aAAZA,GACF1F,EAAU2F,OAAS3F,EAAU4F,YAC7BnB,EAAUkB,OAASlB,EAAUmB,YAG7B5B,EAAO6B,eAAc,GACrB7B,EAAO8B,UAAU,CACf1K,MAAO,CACLkC,EAAGP,EAAOO,EAAI7K,EAAYV,IAAI,iBAE/B,IAAK,gBAERiO,EAAU2F,OAAS3F,EAAU+F,aAC7BtB,EAAUkB,OAASlB,EAAUsB,aAC7B/B,EAAO6B,eAAc,GACrB7B,EAAO8B,UAAU,CACf1K,MAAO,CACLkC,EAAGP,EAAOO,IAEX,IAAK,gBAER,KACJnH,EAAQ6F,cAAc1K,OAGxB+S,EAAciB,aAAe,SAAUxS,EAAM4G,GAC3C,IAAIsG,EAAY1O,KAAKkT,QAAQ,GACzBC,EAAYnT,KAAKkT,QAAQ,GACzB/R,EAAcK,EAAK+M,UACnBhH,EAAY/F,EAAK4R,aAAahL,GAE9BsM,EADSlT,EAAKsQ,cAAc1J,GACPyG,MACrB8E,EAAcnS,EAAK8G,cAAcF,EAAK,SAE1C,IAAKsM,GAAeC,MAAMD,EAAY7N,IAAM8N,MAAMD,EAAY5N,GAC5DqM,EAAUkB,OAASlB,EAAUsB,aAAetB,EAAUmB,YAAc5F,EAAU2F,OAAS3F,EAAU+F,aAAe/F,EAAU4F,aAAc,MAD1I,CAKAzP,EAAQ6O,YAAYhF,EAAW,CAC7B5E,MAAO,CACL8K,OAAQF,EAAYG,YAAc,CAAC,CAACH,EAAY7N,EAAG6N,EAAY5N,GAAI,CAAC4N,EAAY7N,EAAG6N,EAAY5N,GAAI,CAAC4N,EAAY7N,EAAG6N,EAAY5N,MAEhI3F,EAAaiH,GAChBvD,EAAQ6O,YAAYP,EAAW,CAC7B7J,MAAO,CACLzC,EAAG6N,EAAY7N,EACfC,EAAG4N,EAAY5N,IAEhB3F,EAAaiH,GAChB+K,EAAUvM,KAAK,CACbkO,SAAUJ,EAAYI,SACtBC,OAAQ,CAACL,EAAY7N,EAAG6N,EAAY5N,GACpCmF,GAAI,KAEN,IAAI+I,EAAazN,EAAUoB,SAAS,SAChCsM,EAAkB1N,EAAUoB,SAAS,kBACrCuM,EAAiB3N,EAAUoB,SAAS,aACpCwM,EAAsB5N,EAAUoB,SAAS,sBACzCgL,EAAcnS,EAAK8G,cAAcF,EAAK,SAC1CvD,EAAQuQ,cAAcjC,EAAU7J,MAAO6J,EAAUW,WAAa,GAAIkB,EAAYC,EAAiB,CAC7FI,aAAc7T,EAAK+M,UACnB+G,eAAgBlN,EAChBmN,YAAa/T,EAAKG,QAAQyG,GAC1BoN,UAAW7B,EACX8B,iBAAkBf,EAAYgB,QAC7B,CACDzM,UAAWyL,EAAYzL,UACvBU,kBAAmB+K,EAAYiB,cAC/BC,QAASpU,EAAK8G,cAAcF,EAAK,aAEnC+K,EAAUkB,OAASlB,EAAUsB,cAAgBO,EAAWvU,IAAI,QAC5D0S,EAAUmB,aAAeW,EAAgBxU,IAAI,QAC7CiO,EAAU2F,OAAS3F,EAAU+F,cAAgBS,EAAezU,IAAI,QAChEiO,EAAU4F,aAAea,EAAoB1U,IAAI,QAEjDiO,EAAUmH,SAAS,CACjBC,OAAQnC,EACRiC,QAASpU,EAAK8G,cAAcF,EAAK,aAEnCsG,EAAUmH,SAASX,EAAevM,SAAS,aAAaoN,gBACxDrH,EAAUoF,WAAaqB,EAAoBxM,SAAS,aAAaoN,eACjE,IAAIjG,EAASoF,EAAezU,IAAI,UAE5BqP,IAAqB,IAAXA,IACZA,EAAS,IAGXpB,EAAU4E,SAAS,CACjBxD,OAAQA,MAIZ3Q,EAAO6W,SAASxD,EAAU3N,EAAQG,OAElC,IAiGInB,EAjGUyN,EAAUrH,OAAO,CAC7BzK,KAAM,MACNI,KAAM,WACJ,IAAIqW,EAAc,IAAIpR,EAAQG,MAC9BhF,KAAKkW,aAAeD,GAEtBxQ,OAAQ,SAAgBtE,EAAapB,EAAS2F,EAAKxB,GACjD,IAAIA,GAAWA,EAAQwN,OAAS1R,KAAKwR,IAArC,CAIA,IAAIhQ,EAAOL,EAAYe,UACnBiU,EAAUnW,KAAKQ,MACf2E,EAAQnF,KAAKmF,MACbsM,EAAe1R,EAAQU,IAAI,aAC3BkF,GAAiBwQ,EACjBlG,EAAgB9O,EAAYV,IAAI,iBAChC2V,EAAgBjX,EAAOuF,MAAM6M,EAAoBvR,KAAKwR,IAAKrQ,EAAasQ,EAAc/L,GACtF/B,EAAexC,EAAYV,IAAI,gBAyBnC,GAxBAe,EAAK6U,KAAKF,GAAS/Q,KAAI,SAAUgD,GAC/B,IAAIkO,EAAW,IAAI9D,EAAShR,EAAM4G,GAE9BzC,GAAmC,UAAlBsK,GACnBqG,EAAS/L,WAAU,SAAUC,GAC3BA,EAAM+J,eAAc,MAIxB5Q,GAAgB2S,EAASvO,GAAG,QAASqO,GACrC5U,EAAK+U,iBAAiBnO,EAAKkO,GAC3BnR,EAAMC,IAAIkR,MACTE,QAAO,SAAUC,EAAQC,GAC1B,IAAIJ,EAAWH,EAAQtE,iBAAiB6E,GACxCJ,EAASxD,WAAWtR,EAAMiV,GAC1BH,EAASK,IAAI,SACbhT,GAAgB2S,EAASvO,GAAG,QAASqO,GACrCjR,EAAMC,IAAIkR,GACV9U,EAAK+U,iBAAiBE,EAAQH,MAC7BtP,QAAO,SAAUoB,GAClB,IAAIkO,EAAWH,EAAQtE,iBAAiBzJ,GACxCjD,EAAM6B,OAAOsP,MACZM,UAECnF,GAAgB9L,GAAiBnE,EAAK0M,QAAU,GAC/B,UAAlB+B,EAA2B,CAG5B,IAFA,IAAInG,EAAQtI,EAAKsQ,cAAc,GAEtB+E,EAAI,EAAGlC,MAAM7K,EAAMqF,aAAe0H,EAAIrV,EAAK0M,UAAW2I,EAC7D/M,EAAQtI,EAAKsQ,cAAc+E,GAG7B,IAAI7K,EAAIkG,KAAK4E,IAAIpR,EAAIS,WAAYT,EAAIW,aAAe,EAChD0Q,EAAiB5X,EAAO6X,KAAK7R,EAAM4R,eAAgB5R,GACvDA,EAAM8R,YAAYjX,KAAKkX,gBAAgBpN,EAAMqN,GAAIrN,EAAMsN,GAAIpL,EAAGlC,EAAMqF,WAAYrF,EAAMoF,UAAW6H,EAAgB5V,SAGjHgE,EAAM4R,iBAGR/W,KAAKQ,MAAQgB,IAEf6V,QAAS,aACTH,gBAAiB,SAAyBC,EAAIC,EAAIpL,EAAGmD,EAAYD,EAAWoI,EAAInW,GAC9E,IAAIoW,EAAW,IAAI1S,EAAQ8N,OAAO,CAChC7I,MAAO,CACLqN,GAAIA,EACJC,GAAIA,EACJ5D,GAAI,EACJxH,EAAGA,EACHmD,WAAYA,EACZ6C,SAAU7C,EACVD,UAAWA,KAQf,OALArK,EAAQ4O,UAAU8D,EAAU,CAC1BzN,MAAO,CACLkI,SAAU7C,GAAcD,EAAY,GAAK,GAAKgD,KAAKsF,GAAK,IAEzDrW,EAAamW,GACTC,GAMTE,aAAc,SAAsBC,EAAOvW,GACzC,IACIwW,EADOxW,EAAYe,UACD4P,cAAc,GAEpC,GAAI6F,EAAY,CACd,IAAIC,EAAKF,EAAM,GAAKC,EAAWR,GAC3BU,EAAKH,EAAM,GAAKC,EAAWP,GAC3BnI,EAASiD,KAAK4F,KAAKF,EAAKA,EAAKC,EAAKA,GACtC,OAAO5I,GAAU0I,EAAW3L,GAAKiD,GAAU0I,EAAWnE,OAK5D1P,EAAOC,QAAUF,G,oBC7UjB,IAAI/E,EAAU,EAAQ,KAElBK,EAAS,EAAQ,KAyDrB2E,EAAOC,QApCP,SAAkBgU,EAAYC,GAC5B7Y,EAAOgD,KAAK6V,GAAa,SAAUC,GACjCA,EAAWzB,OAAS,aAOpB1X,EAAQ2F,eAAewT,GAAY,SAAU/T,EAASnE,GACpD,IAAIG,EAAW,GAiBf,OAhBAH,EAAQsE,cAAc,CACpB+H,SAAU,SACV8L,QAASH,EACTI,MAAOjU,IACN,SAAU/C,GACPA,EAAY8W,EAAWrL,SACzBzL,EAAY8W,EAAWrL,QAAQ1I,EAAQrD,KAAMqD,EAAQsD,WAGvD,IAAIhG,EAAOL,EAAYe,UAEvBV,EAAKW,MAAK,SAAUiG,GAClB,IAAIvH,EAAOW,EAAKG,QAAQyG,GACxBlI,EAASW,GAAQM,EAAYL,WAAWD,KAAS,QAG9C,CACLA,KAAMqD,EAAQrD,KACdX,SAAUA,EACVyR,SAAUzN,EAAQyN,kB,oBCrD1B,IAEIxK,EAFQ,EAAQ,KAEMA,cAmE1BrD,EAAOC,QA5CP,SAAkBgU,GAChB,MAAO,CACLK,gBAAiB,SAAyBrY,GAExC,IAAIsY,EAAe,GACfC,EAAiBnR,IAKrB,OAJApH,EAAQwY,iBAAiBR,GAAY,SAAU5W,GAC7CA,EAAYqX,eAAiBH,EAC7BC,EAAenQ,IAAIhH,EAAYqQ,IAAKrQ,MAE/BmX,GAETG,MAAO,SAAetX,EAAapB,GACjC,IAAI2Y,EAAUvX,EAAYqM,aACtBmL,EAAS,GACTnX,EAAOL,EAAYe,UACvBV,EAAKW,MAAK,SAAUiG,GAClB,IAAIwQ,EAASpX,EAAKqX,YAAYzQ,GAC9BuQ,EAAOC,GAAUxQ,KAEnBsQ,EAAQvW,MAAK,SAAUyW,GACrB,IAAIE,EAAcH,EAAOC,GAErBG,EAAiC,MAAfD,GAAuBtX,EAAK8G,cAAcwQ,EAAa,SAAS,GAEtF,GAAKC,EAYHL,EAAQM,cAAcJ,EAAQ,QAASG,OAZnB,CAEpB,IACIrV,EADYgV,EAAQtF,aAAawF,GACfnY,IAAI,oBAAsBU,EAAY8X,oBAAoBP,EAAQ/W,QAAQiX,IAAWA,EAAS,GAAIzX,EAAYqX,eAAgBE,EAAQxK,SAE5JwK,EAAQM,cAAcJ,EAAQ,QAASlV,GAEpB,MAAfoV,GACFtX,EAAKwX,cAAcF,EAAa,QAASpV,W,oBC1DrD,IAAIwV,EAAU,EAAQ,KAElBC,EAAeD,EAAQC,aACvBC,EAAYF,EAAQE,UAEpB1E,EAAc,EAAQ,KAEtBvV,EAAS,EAAQ,KAqBjBka,EAAgB,EAAVnH,KAAKsF,GACX8B,EAASpH,KAAKsF,GAAK,IA0HvB1T,EAAOC,QAxHP,SAAkBgU,EAAYhY,EAAS2F,EAAKxB,GAC1CnE,EAAQwY,iBAAiBR,GAAY,SAAU5W,GAC7C,IAAIK,EAAOL,EAAYe,UACnB4L,EAAWtM,EAAKuM,aAAa,SAC7BiB,EAAS7N,EAAYV,IAAI,UACzBwO,EAAS9N,EAAYV,IAAI,UAExBtB,EAAOoR,QAAQtB,KAClBA,EAAS,CAAC,EAAGA,IAGV9P,EAAOoR,QAAQvB,KAClBA,EAAS,CAACA,EAAQA,IAGpB,IAAI9I,EAAQR,EAAIS,WACZC,EAASV,EAAIW,YACb0C,EAAOmJ,KAAKqH,IAAIrT,EAAOE,GACvB+Q,EAAKgC,EAAanK,EAAO,GAAI9I,GAC7BkR,EAAK+B,EAAanK,EAAO,GAAI5I,GAC7BoN,EAAK2F,EAAalK,EAAO,GAAIlG,EAAO,GACpCiD,EAAImN,EAAalK,EAAO,GAAIlG,EAAO,GACnCoG,GAAchO,EAAYV,IAAI,cAAgB6Y,EAC9ClK,EAAWjO,EAAYV,IAAI,YAAc6Y,EACzCE,EAAiB,EACrBhY,EAAKW,KAAK2L,GAAU,SAAUK,IAC3BwG,MAAMxG,IAAUqL,OAEnB,IAAIC,EAAMjY,EAAKkY,OAAO5L,GAElB6L,EAAazH,KAAKsF,IAAMiC,GAAOD,GAAkB,EACjDtK,EAAY/N,EAAYV,IAAI,aAC5BmZ,EAAWzY,EAAYV,IAAI,YAC3BiP,EAAmBvO,EAAYV,IAAI,oBAEnCoZ,EAASrY,EAAKsY,cAAchM,GAChC+L,EAAO,GAAK,EAEZ,IAAIE,EAAYV,EACZW,EAA6B,EAC7BC,EAAe9K,EACf+K,EAAMhL,EAAY,GAAK,EA+C3B,GA9CA1N,EAAKW,KAAK2L,GAAU,SAAUK,EAAO/F,GACnC,IAAI+R,EAEJ,GAAIxF,MAAMxG,GACR3M,EAAK4Y,cAAchS,EAAK,CACtB+R,MAAOE,IACPlL,WAAYkL,IACZrI,SAAUqI,IACVnL,UAAWA,EACXiI,GAAIA,EACJC,GAAIA,EACJ5D,GAAIA,EACJxH,EAAG4N,EAAWS,IAAMrO,QATxB,EAgBEmO,EADe,SAAbP,EACc,IAARH,GAAa/J,EAAmBiK,EAAaxL,EAAQwL,EAErDN,EAAMG,GAGJpK,GACV+K,EAAQ/K,EACR2K,GAAa3K,GAEb4K,GAA8B7L,EAGhC,IAAI6D,EAAWiI,EAAeC,EAAMC,EACpC3Y,EAAK4Y,cAAchS,EAAK,CACtB+R,MAAOA,EACPhL,WAAY8K,EACZjI,SAAUA,EACV9C,UAAWA,EACXiI,GAAIA,EACJC,GAAIA,EACJ5D,GAAIA,EACJxH,EAAG4N,EAAWR,EAAUjL,EAAO0L,EAAQ,CAACrG,EAAIxH,IAAMA,IAEpDiO,EAAejI,MAIb+H,EAAYV,GAAOG,EAGrB,GAAIO,GAAa,KAAM,CACrB,IAAII,EAAQd,EAAMG,EAClBhY,EAAKW,KAAK2L,GAAU,SAAUK,EAAO/F,GACnC,IAAKuM,MAAMxG,GAAQ,CACjB,IAAI1C,EAASjK,EAAKsQ,cAAc1J,GAChCqD,EAAO0O,MAAQA,EACf1O,EAAO0D,WAAaA,EAAa+K,EAAM9R,EAAM+R,EAC7C1O,EAAOuG,SAAW7C,EAAa+K,GAAO9R,EAAM,GAAK+R,WAIrDR,EAAaI,EAAYC,EACzBC,EAAe9K,EACf3N,EAAKW,KAAK2L,GAAU,SAAUK,EAAO/F,GACnC,IAAKuM,MAAMxG,GAAQ,CACjB,IAAI1C,EAASjK,EAAKsQ,cAAc1J,GAC5B+R,EAAQ1O,EAAO0O,QAAU/K,EAAWA,EAAWjB,EAAQwL,EAC3DlO,EAAO0D,WAAa8K,EACpBxO,EAAOuG,SAAWiI,EAAeC,EAAMC,EACvCF,GAAgBC,EAAMC,MAM9BzF,EAAYvT,EAAa6K,EAAG9F,EAAOE,Q,oBCnJvC,IAAIkU,EAAc,EAAQ,KAsBtBhB,EAASpH,KAAKsF,GAAK,IAEvB,SAAS+C,EAAiBzJ,EAAMqG,EAAIC,EAAIpL,EAAGkO,EAAKM,EAAWC,GAKzD,SAASC,EAAUnI,EAAOoI,EAAKC,EAAOV,GACpC,IAAK,IAAIW,EAAItI,EAAOsI,EAAIF,EAAKE,IAG3B,GAFA/J,EAAK+J,GAAG/T,GAAK8T,EAETC,EAAItI,GAASsI,EAAI,EAAIF,GAAO7J,EAAK+J,EAAI,GAAG/T,EAAIgK,EAAK+J,GAAG/T,EAAIgK,EAAK+J,GAAGzU,OAElE,YADA0U,EAAQD,EAAGD,EAAQ,GAKvBE,EAAQH,EAAM,EAAGC,EAAQ,GAG3B,SAASE,EAAQH,EAAKC,GACpB,IAAK,IAAIC,EAAIF,EAAKE,GAAK,IACrB/J,EAAK+J,GAAG/T,GAAK8T,IAETC,EAAI,GAAK/J,EAAK+J,GAAG/T,EAAIgK,EAAK+J,EAAI,GAAG/T,EAAIgK,EAAK+J,EAAI,GAAGzU,SAH7ByU,MAS5B,SAASE,EAAQjK,EAAMkK,EAAY7D,EAAIC,EAAIpL,EAAGkO,GAQ5C,IAPA,IAAIe,EAAuBD,EACzBE,OAAOC,UACP,EAKOxa,EAAI,EAAGya,EAAItK,EAAKlQ,OAAQD,EAAIya,EAAGza,IAAK,CAC3C,IAAI0a,EAASnJ,KAAKoJ,IAAIxK,EAAKnQ,GAAGmG,EAAIsQ,GAC9BxW,EAASkQ,EAAKnQ,GAAGsN,IACjB4B,EAAUiB,EAAKnQ,GAAG4a,KAClBC,EAASH,EAASrP,EAAIpL,EAASsR,KAAK4F,MAAM9L,EAAIpL,EAASiP,IAAY7D,EAAIpL,EAASiP,GAAWwL,EAASA,GAAUnJ,KAAKoJ,IAAIxK,EAAKnQ,GAAGkG,EAAIsQ,GAEnI6D,GAAcQ,GAAUP,IAE1BO,EAASP,EAAa,KAGnBD,GAAcQ,GAAUP,IAE3BO,EAASP,EAAa,IAGxBnK,EAAKnQ,GAAGkG,EAAIsQ,EAAKqE,EAAStB,EAC1Be,EAAaO,GApDjB1K,EAAK2K,MAAK,SAAUC,EAAGC,GACrB,OAAOD,EAAE5U,EAAI6U,EAAE7U,KA6DjB,IANA,IACI8T,EADAgB,EAAQ,EAER3N,EAAM6C,EAAKlQ,OACXib,EAAS,GACTC,EAAW,GAENnb,EAAI,EAAGA,EAAIsN,EAAKtN,KACvBia,EAAQ9J,EAAKnQ,GAAGmG,EAAI8U,GAER,GACVlB,EAAU/Z,EAAGsN,GAAM2M,GAGrBgB,EAAQ9K,EAAKnQ,GAAGmG,EAAIgK,EAAKnQ,GAAGyF,OAG1BqU,EAAamB,EAAQ,GACvBd,EAAQ7M,EAAM,EAAG2N,EAAQnB,GAG3B,IAAS9Z,EAAI,EAAGA,EAAIsN,EAAKtN,IACnBmQ,EAAKnQ,GAAGmG,GAAKsQ,EACf0E,EAASxa,KAAKwP,EAAKnQ,IAEnBkb,EAAOva,KAAKwP,EAAKnQ,IAIrBoa,EAAQc,GAAQ,EAAO1E,EAAIC,EAAIpL,EAAGkO,GAClCa,EAAQe,GAAU,EAAM3E,EAAIC,EAAIpL,EAAGkO,GA4CrC,SAAS6B,EAAiBtQ,GAExB,MAA2B,WAApBA,EAAOmE,SAgGhB9L,EAAOC,QA7FP,SAAkB5C,EAAa6K,EAAGwO,EAAWC,EAAYhB,GACvD,IAEItC,EACAC,EAHA5V,EAAOL,EAAYe,UACnB8Z,EAAkB,GAGlBC,GAAiB,EACjBC,GAAsB/a,EAAYV,IAAI,sBAAwB,GAAK6Y,EACvE9X,EAAKW,MAAK,SAAUiG,GAClB,IAAIqD,EAASjK,EAAKsQ,cAAc1J,GAC5Bb,EAAY/F,EAAK4R,aAAahL,GAC9B4M,EAAazN,EAAUoB,SAAS,SAEhCwT,EAAgBnH,EAAWvU,IAAI,aAAe8G,EAAU9G,IAAI,2BAC5DyU,EAAiB3N,EAAUoB,SAAS,aACpCyT,EAAelH,EAAezU,IAAI,UAClC4b,EAAgBnH,EAAezU,IAAI,WAEvC,KAAIgL,EAAO0O,MAAQ+B,GAAnB,CAIA,IAGIlT,EACAsT,EACAzH,EACA5L,EANA8I,GAAYtG,EAAO0D,WAAa1D,EAAOuG,UAAY,EACnD4F,EAAK1F,KAAKC,IAAIJ,GACd8F,EAAK3F,KAAKE,IAAIL,GAKlBoF,EAAK1L,EAAO0L,GACZC,EAAK3L,EAAO2L,GACZ,IAAImF,EAAkC,WAAlBJ,GAAgD,UAAlBA,EAElD,GAAsB,WAAlBA,EACFnT,EAAQyC,EAAO0L,GACfmF,EAAQ7Q,EAAO2L,GACfnO,EAAY,aACP,CACL,IAAIuT,GAAMD,GAAiB9Q,EAAOO,EAAIP,EAAO+H,IAAM,EAAIoE,EAAKnM,EAAOO,EAAI4L,GAAMT,EACzEsF,GAAMF,GAAiB9Q,EAAOO,EAAIP,EAAO+H,IAAM,EAAIqE,EAAKpM,EAAOO,EAAI6L,GAAMT,EAI7E,GAHApO,EAAQwT,EAAU,EAAL5E,EACb0E,EAAQG,EAAU,EAAL5E,GAER0E,EAAe,CAElB,IAAIG,EAAKF,EAAK5E,GAAMwE,EAAepQ,EAAIP,EAAOO,GAC1C2Q,EAAKF,EAAK5E,GAAMuE,EAAepQ,EAAIP,EAAOO,GAC1C4Q,EAAKF,GAAM9E,EAAK,GAAK,EAAI,GAAKyE,EAElCrT,EAAQ4T,GAAMhF,EAAK,GAAK,EAAI,GAC5B0E,EAFSK,EAGT9H,EAAa,CAAC,CAAC2H,EAAIC,GAAK,CAACC,EAAIC,GAAK,CAACC,EAH1BD,IAMX1T,EAAYsT,EAAgB,SAAW3E,EAAK,EAAI,OAAS,QAG3D,IACIiF,EADAC,EAAO9H,EAAW+H,UAElBpN,EAASqF,EAAWvU,IAAI,UAG1Boc,EADoB,kBAAXlN,EACKA,GAAUuC,KAAKsF,GAAK,KAEpB7H,EAASiI,EAAK,GAAK7F,EAAWG,KAAKsF,IAAMzF,EAAW,EAGpE,IAAIvI,EAAOrI,EAAY6b,kBAAkB5U,EAAK,WAAa5G,EAAKG,QAAQyG,GACpE6U,EAAW3C,EAAYvQ,gBAAgBP,EAAMsT,EAAM7T,EAAW,OAClEgT,IAAmBY,EACnBpR,EAAOoD,MAAQ,CACbhI,EAAGmC,EACHlC,EAAGwV,EACH1M,SAAUuM,EACV/V,OAAQ6W,EAAS7W,OACjB6H,IAAKmO,EACLb,KAAMc,EACNxH,WAAYA,EACZ5L,UAAWA,EACX0M,cAAe,SACfb,SAAU+H,EACVnH,OAAQ6G,GAGLA,GACHP,EAAgB1a,KAAKmK,EAAOoD,YAI3BoN,GAAkB9a,EAAYV,IAAI,sBAtIzC,SAAsBub,EAAiB7E,EAAIC,EAAIpL,EAAGwO,EAAWC,GAI3D,IAHA,IAAIyC,EAAW,GACXC,EAAY,GAEPxc,EAAI,EAAGA,EAAIqb,EAAgBpb,OAAQD,IACtCob,EAAiBC,EAAgBrb,MAIjCqb,EAAgBrb,GAAGkG,EAAIsQ,EACzB+F,EAAS5b,KAAK0a,EAAgBrb,IAE9Bwc,EAAU7b,KAAK0a,EAAgBrb,KAOnC,IAHA4Z,EAAiB4C,EAAWhG,EAAIC,EAAIpL,EAAG,EAAGwO,EAAWC,GACrDF,EAAiB2C,EAAU/F,EAAIC,EAAIpL,GAAI,EAAGwO,EAAWC,GAE5C9Z,EAAI,EAAGA,EAAIqb,EAAgBpb,OAAQD,IAC1C,IAAIob,EAAiBC,EAAgBrb,IAArC,CAIA,IAAIkU,EAAamH,EAAgBrb,GAAGkU,WAEpC,GAAIA,EAAY,CACd,IAAIuI,EAAOvI,EAAW,GAAG,GAAKA,EAAW,GAAG,GAExCmH,EAAgBrb,GAAGkG,EAAIsQ,EACzBtC,EAAW,GAAG,GAAKmH,EAAgBrb,GAAGkG,EAAI,EAE1CgO,EAAW,GAAG,GAAKmH,EAAgBrb,GAAGkG,EAAI,EAG5CgO,EAAW,GAAG,GAAKA,EAAW,GAAG,GAAKmH,EAAgBrb,GAAGmG,EACzD+N,EAAW,GAAG,GAAKA,EAAW,GAAG,GAAKuI,IAmGxCC,CAAarB,EAAiB7E,EAAIC,EAAIpL,EAAGwO,EAAWC,K,kBCzMxD3W,EAAOC,QA5BP,SAAkBgU,GAChB,MAAO,CACLA,WAAYA,EACZU,MAAO,SAAetX,EAAapB,GACjC,IAAImM,EAAenM,EAAQoM,eAAe,CACxCC,SAAU,WAGZ,GAAKF,GAAiBA,EAAatL,OAAnC,CAIA,IAAIY,EAAOL,EAAYe,UACvBV,EAAK8b,YAAW,SAAUlV,GAGxB,IAFA,IAAIvH,EAAOW,EAAKG,QAAQyG,GAEfzH,EAAI,EAAGA,EAAIuL,EAAatL,OAAQD,IACvC,IAAKuL,EAAavL,GAAGG,WAAWD,GAC9B,OAAO,EAIX,OAAO","file":"static/js/5.cd4f5e8d.chunk.js","sourcesContent":["/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\n\n\necharts.registerProcessor(legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function init(option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n  },\n  mergeOption: function mergeOption(option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n  },\n  optionUpdated: function optionUpdated() {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function _updateData(ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendDataProvider) {\n        var data = seriesModel.legendDataProvider();\n        var names = data.mapArray(data.getName);\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function getData() {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function select(name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function unSelect(name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function toggleSelected(name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function isSelected(name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 4,\n    show: true,\n    // 布局方式，默认为水平布局，可选为：\n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // 水平对齐\n    // 'auto' | 'left' | 'right'\n    // 默认为 'auto', 根据 x 的位置判断是左对齐还是右对齐\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // 图例边框颜色\n    borderColor: '#ccc',\n    borderRadius: 0,\n    // 图例边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 图例内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // 各个item之间的间隔，单位px，默认为10，\n    // 横向布局时为水平间隔，纵向布局时为纵向间隔\n    itemGap: 10,\n    // 图例图形宽度\n    itemWidth: 25,\n    // 图例图形高度\n    itemHeight: 14,\n    // 图例关闭时候的颜色\n    inactiveColor: '#ccc',\n    textStyle: {\n      // 图例文字颜色\n      color: '#333'\n    },\n    // formatter: '',\n    // 选择模式，默认开启图例开关\n    selectedMode: true,\n    // 配置默认选中状态，可配合LEGEND.SELECTED事件做动态数据载入\n    // selected: null,\n    // 图例内容（详见legend.data，数组中每一项代表一个item\n    // data: [],\n    // Tooltip 相关配置\n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function init() {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function getContentGroup() {\n    return this._contentGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function render(legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && legendModel.get('orient') === 'vertical' ? 'right' : 'left';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function resetInner() {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function renderInner(itemAlign, legendModel, ecModel, api) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Series legend\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, api)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Data legend of pie, funnel\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendDataProvider) {\n            var data = seriesModel.legendDataProvider();\n            var idx = data.indexOfName(name);\n\n            if (idx < 0) {\n              return;\n            }\n\n            var color = data.getItemVisual(idx, 'color');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, name, api)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n  },\n  _createItem: function _createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    itemGroup.add(createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      } // Put symbol in the center\n\n\n      itemGroup.add(createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function layoutInner(legendModel, itemAlign, maxSize) {\n    var contentGroup = this.getContentGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    contentGroup.attr('position', [-contentRect.x, -contentRect.y]);\n    return this.group.getBoundingRect();\n  },\n\n  /**\n   * @protected\n   */\n  remove: function remove() {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction dispatchSelectAction(name, api) {\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: name\n  });\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\n\n\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(dataColor('pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(dataFilter('pie'));","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../../echarts\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function init(option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendDataProvider = function () {\n      return this.getRawData();\n    };\n\n    this.updateSelectedMap(this._createSelectableList());\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function mergeOption(newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this._createSelectableList());\n  },\n  getInitialData: function getInitialData(option, ecModel) {\n    return createListSimply(this, ['value']);\n  },\n  _createSelectableList: function _createSelectableList() {\n    var data = this.getRawData();\n    var valueDim = data.mapDimension('value');\n    var targetList = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      targetList.push({\n        name: data.getName(i),\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    return targetList;\n  },\n  // Overwrite\n  getDataParams: function getDataParams(dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function _defaultLabelLine(option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 高亮扇区偏移量\n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    label: {\n      // If rotate around circle\n      rotate: false,\n      show: true,\n      // 'outer', 'inside', 'center'\n      position: 'outer' // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    // Animation type canbe expansion, scale\n    animationType: 'expansion',\n    animationEasing: 'cubicOut'\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\n\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\n\n\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function updateSelectedMap(targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function select(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function unSelect(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function toggleSelected(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function isSelected(name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    graphic.updateProps(sector, {\n      shape: sectorShape\n    }, seriesModel, idx);\n  } // Update common style\n\n\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemModel.getModel('itemStyle').getItemStyle()));\n  sector.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), seriesModel.isSelected(null, idx), seriesModel.get('selectedOffset'), seriesModel.get('animation'));\n\n  this._updateLabel(data, idx);\n\n  this.highDownOnUpdate = itemModel.get('hoverAnimation') && seriesModel.isAnimationEnabled() ? function (fromState, toState) {\n    if (toState === 'emphasis') {\n      labelLine.ignore = labelLine.hoverIgnore;\n      labelText.ignore = labelText.hoverIgnore; // Sector may has animation of updating data. Force to move to the last frame\n      // Or it may stopped on the wrong shape\n\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r + seriesModel.get('hoverOffset')\n        }\n      }, 300, 'elasticOut');\n    } else {\n      labelLine.ignore = labelLine.normalIgnore;\n      labelText.ignore = labelText.normalIgnore;\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r\n        }\n      }, 300, 'elasticOut');\n    }\n  } : null;\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n\n  if (!labelLayout || isNaN(labelLayout.x) || isNaN(labelLayout.y)) {\n    labelText.ignore = labelText.normalIgnore = labelText.hoverIgnore = labelLine.ignore = labelLine.normalIgnore = labelLine.hoverIgnore = true;\n    return;\n  }\n\n  graphic.updateProps(labelLine, {\n    shape: {\n      points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n    }\n  }, seriesModel, idx);\n  graphic.updateProps(labelText, {\n    style: {\n      x: labelLayout.x,\n      y: labelLayout.y\n    }\n  }, seriesModel, idx);\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var labelLineModel = itemModel.getModel('labelLine');\n  var labelLineHoverModel = itemModel.getModel('emphasis.labelLine');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: data.getName(idx),\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function init() {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function render(seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && isFirstRender && data.count() > 0 // Default expansion animation\n    && animationType !== 'scale') {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel));\n    } else {\n      // clipPath is used in first-time animation, so remove it when otherwise. See: #8994\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  dispose: function dispose() {},\n  _createClipPath: function _createClipPath(cx, cy, r, startAngle, clockwise, cb, seriesModel) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function containPoint(point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\n\nfunction _default(seriesType) {\n  return {\n    getTargetSeries: function getTargetSeries(ecModel) {\n      // Pie and funnel may use diferrent scope\n      var paletteScope = {};\n      var seiresModelMap = createHashMap();\n      ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n        seriesModel.__paletteScope = paletteScope;\n        seiresModelMap.set(seriesModel.uid, seriesModel);\n      });\n      return seiresModelMap;\n    },\n    reset: function reset(seriesModel, ecModel) {\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n\n        if (!singleDataColor) {\n          // FIXME Performance\n          var itemModel = dataAll.getItemModel(rawIdx);\n          var color = itemModel.get('itemStyle.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || rawIdx + '', seriesModel.__paletteScope, dataAll.count()); // Legend may use the visual info in data before processed\n\n          dataAll.setItemVisual(rawIdx, 'color', color); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        } else {\n          // Set data all color for legend\n          dataAll.setItemVisual(rawIdx, 'color', singleDataColor);\n        }\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = api.getWidth();\n    var height = api.getHeight();\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width);\n    var cy = parsePercent(center[1], height);\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, width, height);\n  });\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar textContain = require(\"zrender/lib/contain/text\");\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\n\n\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  });\n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  }\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // right-side\n    ? Number.MAX_VALUE // down\n    : 0 // up\n    : isDownList // left-side\n    ? Number.MAX_VALUE // down\n    : 0; // up\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // right-down, left-down\n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // right-up, left-up\n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight) {\n  var leftList = [];\n  var rightList = [];\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (labelLayoutList[i].x < cx) {\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    var linePoints = labelLayoutList[i].linePoints;\n\n    if (linePoints) {\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (labelLayoutList[i].x < cx) {\n        linePoints[2][0] = labelLayoutList[i].x + 3;\n      } else {\n        linePoints[2][0] = labelLayoutList[i].x - 3;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = labelLayoutList[i].y;\n      linePoints[1][0] = linePoints[2][0] + dist;\n    }\n  }\n}\n\nfunction isPositionCenter(layout) {\n  // Not change x for center label\n  return layout.position === 'center';\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight, sum) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('emphasis.label.position');\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    var labelLineLen2 = labelLineModel.get('length2');\n\n    if (layout.angle < minShowLabelRadian) {\n      return;\n    }\n\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n        textX = x3 + (dx < 0 ? -5 : 5);\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : dx > 0 ? 'left' : 'right';\n    }\n\n    var font = labelModel.getFont();\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight);\n  }\n}\n\nmodule.exports = _default;","/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function reset(seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nmodule.exports = _default;"],"sourceRoot":""}